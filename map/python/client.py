import asyncio
import time
import socketio
from random import randrange
import json

class SocketX:
    def __init__(self, ws):
        self.sio = socketio.Client()

        @self.sio.event
        def connect():
            print('connection established')

        @self.sio.event
        def disconnect():
            print('disconnected from server')

        self.sio.connect(ws)
        
    def Emit(self, eventName, data):
        self.sio.emit(eventName, data)

class ReaderX:    

    def __init__(self):
        self.updates = 0
        self.cars = []

    def Read(self):        
        self.updates = self.updates + 1
        #TODO :Replace this by actual read function
        result = {"carID" : "test-car", "location":[10,10]} 

       

        return result
    
    def Test(self,simulator):
        self.updates = self.updates + 1
        result = simulator.Update()
        
        current = None
        for x in self.cars:
          if (x["id"] == result["id"]): 
              current = result              
              current["failAt"] = x["failAt"]
              current["okAt"] = x["okAt"]
              current["problem"] = x["problem"]
              current["time"] = x["time"]
              

        if(current == None):
          current = result
          current["failAt"] = randrange(25) + 10
          current["okAt"] = current["failAt"] / 2
          current["problem"] = False
          current["time"] = 0
          self.cars.append(current)   
        
        self.Data(current)
        
        return current
    
    def Data(self, item):
        
        if(self.updates % item["failAt"] == 0):
          item["problem"] = True
        
        if(item["problem"]):
          item["time"] = item["time"] + 1  

          if(item["time"] > item["okAt"]):
            item["problem"] = False
            item["time"] = 0
        
        item["data"] = {"People" : randrange(10), "Motor-Temperature" : str(randrange(10) + 20) + " C"}

        if(item["problem"]):
          problemType = randrange(3) + 1
          problem = "Motor-Temperature"
          if(problemType == 1):
            problem = "Low Battery"
          elif(problemType == 2):
            problem = "Breaks Problem"
          elif(problemType == 3):
            problem = "General system problem"
            
          item["data"]["Problem"] = problem

        for x in self.cars:
          if (x["id"] == item["id"]): 
              x["time"] = item["time"]
              x["problem"] = item["problem"]
        
        return item
        
    


class CarSimulator:
    instance_number = 0
    def __init__(self, id, path, frequency, reversePath):
        CarSimulator.instance_number = CarSimulator.instance_number + 1

        self.frequency = frequency

        self.serialNumber = CarSimulator.instance_number

        self.path = path.copy()

        if(reversePath):
            self.path.reverse()

        self.id = id        

        self.currentIndex = len(self.path) -1

        self.location = self.path[self.currentIndex]
        
        self.data = {"id" :self.id, "location" : self.location}
        
        
    def Update(self):
        if(self.currentIndex + self.frequency < len(self.path) - self.frequency):
            self.currentIndex = self.currentIndex + self.frequency
            #print("updating index... ", self.currentIndex)
        else:
            self.currentIndex = 0
        
        self.location =  self.path[self.currentIndex]

        self.data = {"id" :self.id, "location" : self.location}        

        return self.data
    
   
    


#used on my simulator
path = [            
              [
                -75.697064,
                45.388604
              ],
              [
                -75.696612,
                45.388758
              ],
              [
                -75.696241,
                45.388884
              ],
              [
                -75.696008,
                45.388932
              ],
              [
                -75.695912,
                45.388739
              ],
              [
                -75.695857,
                45.388402
              ],
              [
                -75.695733,
                45.387987
              ],
              [
                -75.695692,
                45.387775
              ],
              [
                -75.695678,
                45.387582
              ],
              [
                -75.69561,
                45.387389
              ],
              [
                -75.695541,
                45.387177
              ],
              [
                -75.695513,
                45.386985
              ],
              [
                -75.695472,
                45.386821
              ],
              [
                -75.695486,
                45.386676
              ],
              [
                -75.695445,
                45.386589
              ],
              [
                -75.695404,
                45.386522
              ],
              [
                -75.695349,
                45.386425
              ],
              [
                -75.695321,
                45.386319
              ],
              [
                -75.69528,
                45.386213
              ],
              [
                -75.69528,
                45.386146
              ],
              [
                -75.695198,
                45.385943
              ],
              [
                -75.695122,
                45.385773
              ],
              [
                -75.69505,
                45.385671
              ],
              [
                -75.694961,
                45.385527
              ],
              [
                -75.694916,
                45.385402
              ],
              [
                -75.694822,
                45.385289
              ],
              [
                -75.694789,
                45.385223
              ],
              [
                -75.694722,
                45.385121
              ],
              [
                -75.694689,
                45.385051
              ],
              [
                -75.694655,
                45.384981
              ],
              [
                -75.694605,
                45.384915
              ],
              [
                -75.694466,
                45.384669
              ],
              [
                -75.694411,
                45.384568
              ],
              [
                -75.694317,
                45.384454
              ],
              [
                -75.694233,
                45.384322
              ],
              [
                -75.694178,
                45.384248
              ],
              [
                -75.694128,
                45.384127
              ],
              [
                -75.694072,
                45.384037
              ],
              [
                -75.694033,
                45.383963
              ],
              [
                -75.693967,
                45.383838
              ],
              [
                -75.693878,
                45.383717
              ],
              [
                -75.693828,
                45.383639
              ],
              [
                -75.693778,
                45.383561
              ],
              [
                -75.693739,
                45.383499
              ],
              [
                -75.693689,
                45.383366
              ],
              [
                -75.693667,
                45.383284
              ],
              [
                -75.693684,
                45.383202
              ],
              [
                -75.693706,
                45.383109
              ],
              [
                -75.693739,
                45.383023
              ],
              [
                -75.693828,
                45.382949
              ],
              [
                -75.693895,
                45.382898
              ],
              [
                -75.693961,
                45.382847
              ],
              [
                -75.694033,
                45.382789
              ],
              [
                -75.694122,
                45.382742
              ],
              [
                -75.694217,
                45.382688
              ],
              [
                -75.694305,
                45.382637
              ],
              [
                -75.694439,
                45.382578
              ],
              [
                -75.694533,
                45.382555
              ],
              [
                -75.694633,
                45.38252
              ],
              [
                -75.694716,
                45.382473
              ],
              [
                -75.694816,
                45.382446
              ],
              [
                -75.694916,
                45.382411
              ],
              [
                -75.695,
                45.382387
              ],
              [
                -75.695077,
                45.38236
              ],
              [
                -75.69515,
                45.382337
              ],
              [
                -75.695238,
                45.382305
              ],
              [
                -75.695338,
                45.382274
              ],
              [
                -75.695444,
                45.382278
              ],
              [
                -75.695599,
                45.382325
              ],
              [
                -75.695683,
                45.382415
              ],
              [
                -75.695744,
                45.382485
              ],
              [
                -75.695799,
                45.382559
              ],
              [
                -75.695833,
                45.38266
              ],
              [
                -75.695894,
                45.382754
              ],
              [
                -75.695938,
                45.382847
              ],
              [
                -75.69601,
                45.382968
              ],
              [
                -75.69611,
                45.383167
              ],
              [
                -75.696171,
                45.383308
              ],
              [
                -75.696221,
                45.383468
              ],
              [
                -75.696238,
                45.383581
              ],
              [
                -75.696321,
                45.383815
              ],
              [
                -75.696332,
                45.384135
              ],
              [
                -75.696371,
                45.384564
              ],
              [
                -75.696371,
                45.384649
              ],
              [
                -75.696355,
                45.384763
              ],
              [
                -75.696371,
                45.384907
              ],
              [
                -75.696366,
                45.385051
              ],
              [
                -75.696371,
                45.385227
              ],
              [
                -75.696371,
                45.38532
              ],
              [
                -75.696377,
                45.385402
              ],
              [
                -75.696371,
                45.385496
              ],
              [
                -75.69636,
                45.385597
              ],
              [
                -75.696355,
                45.38573
              ],
              [
                -75.696393,
                45.385925
              ],
              [
                -75.696388,
                45.386053
              ],
              [
                -75.696371,
                45.38619
              ],
              [
                -75.696366,
                45.386268
              ],
              [
                -75.696366,
                45.386381
              ],
              [
                -75.696388,
                45.386498
              ],
              [
                -75.696377,
                45.386623
              ],
              [
                -75.696371,
                45.386748
              ],
              [
                -75.696366,
                45.386868
              ],
              [
                -75.696388,
                45.386993
              ],
              [
                -75.696416,
                45.387095
              ],
              [
                -75.696405,
                45.387219
              ],
              [
                -75.696421,
                45.387301
              ],
              [
                -75.696466,
                45.387442
              ],
              [
                -75.696505,
                45.387578
              ],
              [
                -75.696593,
                45.387758
              ],
              [
                -75.696638,
                45.387882
              ],
              [
                -75.69666,
                45.387992
              ],
              [
                -75.696704,
                45.388101
              ],
              [
                -75.696771,
                45.388202
              ],
              [
                -75.696838,
                45.388319
              ],
              [
                -75.696893,
                45.388428
              ],
              [
                -75.696971,
                45.388506
              ],
              [
                -75.69701,
                45.388553
              ],
              [
                -75.697064,
                45.388604
              ]
            ]
path2 = [
              [
                -75.695745,
                45.382483
              ],
              [
                -75.695799,
                45.382463
              ],
              [
                -75.695837,
                45.382451
              ],
              [
                -75.69589,
                45.382436
              ],
              [
                -75.695912,
                45.382414
              ],
              [
                -75.695953,
                45.382394
              ],
              [
                -75.696013,
                45.382372
              ],
              [
                -75.696055,
                45.382345
              ],
              [
                -75.696073,
                45.382332
              ],
              [
                -75.696118,
                45.382309
              ],
              [
                -75.696171,
                45.382292
              ],
              [
                -75.696234,
                45.382257
              ],
              [
                -75.696278,
                45.382235
              ],
              [
                -75.696322,
                45.382213
              ],
              [
                -75.696372,
                45.382179
              ],
              [
                -75.696451,
                45.382154
              ],
              [
                -75.696505,
                45.382123
              ],
              [
                -75.696559,
                45.382092
              ],
              [
                -75.696631,
                45.38205
              ],
              [
                -75.696669,
                45.382028
              ],
              [
                -75.696701,
                45.382014
              ],
              [
                -75.696739,
                45.381977
              ],
              [
                -75.696774,
                45.381941
              ],
              [
                -75.696812,
                45.381906
              ],
              [
                -75.696862,
                45.38187
              ],
              [
                -75.696884,
                45.381832
              ],
              [
                -75.696913,
                45.381801
              ],
              [
                -75.696947,
                45.381766
              ],
              [
                -75.696963,
                45.381741
              ],
              [
                -75.697011,
                45.381708
              ],
              [
                -75.697058,
                45.381682
              ],
              [
                -75.697086,
                45.38165
              ],
              [
                -75.697156,
                45.381628
              ],
              [
                -75.6972,
                45.381604
              ],
              [
                -75.697244,
                45.381582
              ],
              [
                -75.697289,
                45.381564
              ],
              [
                -75.697346,
                45.381526
              ],
              [
                -75.697393,
                45.381493
              ],
              [
                -75.69744,
                45.381471
              ],
              [
                -75.697494,
                45.381444
              ],
              [
                -75.697522,
                45.381426
              ],
              [
                -75.697589,
                45.381378
              ],
              [
                -75.697646,
                45.381349
              ],
              [
                -75.697687,
                45.381322
              ],
              [
                -75.697731,
                45.381289
              ],
              [
                -75.697794,
                45.381249
              ],
              [
                -75.697832,
                45.381216
              ],
              [
                -75.697883,
                45.381187
              ],
              [
                -75.697905,
                45.381156
              ],
              [
                -75.697936,
                45.381131
              ],
              [
                -75.697981,
                45.381107
              ],
              [
                -75.698051,
                45.381046
              ],
              [
                -75.698067,
                45.381029
              ],
              [
                -75.698146,
                45.380975
              ],
              [
                -75.698199,
                45.380931
              ],
              [
                -75.698244,
                45.380898
              ],
              [
                -75.698291,
                45.380869
              ],
              [
                -75.698342,
                45.380838
              ],
              [
                -75.698392,
                45.380811
              ],
              [
                -75.69843,
                45.380773
              ],
              [
                -75.698462,
                45.380738
              ],
              [
                -75.698506,
                45.380702
              ],
              [
                -75.698566,
                45.380676
              ],
              [
                -75.698613,
                45.38064
              ],
              [
                -75.698654,
                45.380605
              ],
              [
                -75.698705,
                45.380576
              ],
              [
                -75.69874,
                45.380547
              ],
              [
                -75.698771,
                45.380509
              ],
              [
                -75.698869,
                45.380438
              ],
              [
                -75.698933,
                45.3804
              ],
              [
                -75.698964,
                45.380369
              ],
              [
                -75.699034,
                45.380321
              ],
              [
                -75.699072,
                45.380283
              ],
              [
                -75.699144,
                45.380245
              ],
              [
                -75.699188,
                45.380192
              ],
              [
                -75.699236,
                45.380159
              ],
              [
                -75.699267,
                45.380141
              ],
              [
                -75.699299,
                45.380121
              ],
              [
                -75.699337,
                45.380094
              ],
              [
                -75.699362,
                45.380072
              ],
              [
                -75.699413,
                45.380041
              ],
              [
                -75.699429,
                45.380012
              ],
              [
                -75.699476,
                45.379981
              ],
              [
                -75.699501,
                45.379954
              ],
              [
                -75.699536,
                45.379932
              ],
              [
                -75.699583,
                45.379899
              ],
              [
                -75.699612,
                45.379877
              ],
              [
                -75.699643,
                45.379839
              ],
              [
                -75.699707,
                45.379803
              ],
              [
                -75.699751,
                45.379768
              ],
              [
                -75.699817,
                45.379719
              ],
              [
                -75.699865,
                45.379692
              ],
              [
                -75.699896,
                45.379666
              ],
              [
                -75.699947,
                45.379617
              ],
              [
                -75.699994,
                45.379588
              ],
              [
                -75.700032,
                45.379557
              ],
              [
                -75.700061,
                45.379539
              ],
              [
                -75.700108,
                45.37951
              ],
              [
                -75.700146,
                45.37949
              ],
              [
                -75.700162,
                45.379468
              ],
              [
                -75.700209,
                45.379437
              ],
              [
                -75.700253,
                45.379408
              ],
              [
                -75.700279,
                45.379388
              ],
              [
                -75.700336,
                45.379341
              ],
              [
                -75.700365,
                45.379319
              ],
              [
                -75.700393,
                45.379303
              ],
              [
                -75.700415,
                45.379286
              ],
              [
                -75.700441,
                45.379274
              ],
              [
                -75.700475,
                45.379283
              ],
              [
                -75.700529,
                45.379321
              ],
              [
                -75.700586,
                45.37939
              ],
              [
                -75.700627,
                45.379445
              ],
              [
                -75.700659,
                45.379501
              ],
              [
                -75.700687,
                45.37955
              ],
              [
                -75.700738,
                45.37963
              ],
              [
                -75.700757,
                45.379696
              ],
              [
                -75.700782,
                45.379745
              ],
              [
                -75.700804,
                45.379805
              ],
              [
                -75.700833,
                45.379863
              ],
              [
                -75.700842,
                45.379927
              ],
              [
                -75.700858,
                45.379994
              ],
              [
                -75.700874,
                45.380073
              ],
              [
                -75.700902,
                45.380131
              ],
              [
                -75.700912,
                45.380182
              ],
              [
                -75.700924,
                45.380253
              ],
              [
                -75.700927,
                45.380304
              ],
              [
                -75.700934,
                45.380353
              ],
              [
                -75.700943,
                45.380398
              ],
              [
                -75.700946,
                45.380433
              ],
              [
                -75.700946,
                45.380462
              ],
              [
                -75.700946,
                45.3805
              ],
              [
                -75.700943,
                45.380562
              ],
              [
                -75.700943,
                45.380602
              ],
              [
                -75.700943,
                45.380679
              ],
              [
                -75.700943,
                45.380715
              ],
              [
                -75.700937,
                45.380775
              ],
              [
                -75.700924,
                45.38081
              ],
              [
                -75.700905,
                45.380848
              ],
              [
                -75.700893,
                45.380926
              ],
              [
                -75.700864,
                45.380999
              ],
              [
                -75.700851,
                45.381066
              ],
              [
                -75.700833,
                45.38111
              ],
              [
                -75.700804,
                45.381139
              ],
              [
                -75.700769,
                45.381185
              ],
              [
                -75.700728,
                45.38123
              ],
              [
                -75.700697,
                45.381274
              ],
              [
                -75.700665,
                45.381319
              ],
              [
                -75.700659,
                45.381343
              ],
              [
                -75.700624,
                45.381392
              ],
              [
                -75.700596,
                45.381434
              ],
              [
                -75.700533,
                45.381516
              ],
              [
                -75.700504,
                45.381573
              ],
              [
                -75.700463,
                45.381624
              ],
              [
                -75.700409,
                45.381702
              ],
              [
                -75.700365,
                45.381766
              ],
              [
                -75.700321,
                45.381822
              ],
              [
                -75.700299,
                45.381862
              ],
              [
                -75.700274,
                45.381897
              ],
              [
                -75.700236,
                45.381942
              ],
              [
                -75.700201,
                45.381982
              ],
              [
                -75.700163,
                45.382026
              ],
              [
                -75.700147,
                45.38207
              ],
              [
                -75.700103,
                45.382119
              ],
              [
                -75.700065,
                45.382168
              ],
              [
                -75.700027,
                45.382197
              ],
              [
                -75.700015,
                45.382241
              ],
              [
                -75.69997,
                45.382286
              ],
              [
                -75.699929,
                45.382339
              ],
              [
                -75.699894,
                45.382386
              ],
              [
                -75.699857,
                45.38243
              ],
              [
                -75.699819,
                45.382468
              ],
              [
                -75.699774,
                45.382548
              ],
              [
                -75.699752,
                45.382583
              ],
              [
                -75.699711,
                45.382643
              ],
              [
                -75.69968,
                45.382681
              ],
              [
                -75.699635,
                45.38275
              ],
              [
                -75.699604,
                45.382787
              ],
              [
                -75.699556,
                45.382834
              ],
              [
                -75.699518,
                45.382894
              ],
              [
                -75.699471,
                45.38294
              ],
              [
                -75.699446,
                45.382985
              ],
              [
                -75.699408,
                45.383029
              ],
              [
                -75.699357,
                45.383078
              ],
              [
                -75.699323,
                45.383129
              ],
              [
                -75.699285,
                45.383173
              ],
              [
                -75.699262,
                45.383202
              ],
              [
                -75.69924,
                45.383249
              ],
              [
                -75.699193,
                45.383302
              ],
              [
                -75.699168,
                45.383344
              ],
              [
                -75.699101,
                45.383437
              ],
              [
                -75.699067,
                45.383482
              ],
              [
                -75.699032,
                45.383555
              ],
              [
                -75.699029,
                45.383575
              ],
              [
                -75.699003,
                45.383617
              ],
              [
                -75.698984,
                45.383671
              ],
              [
                -75.698981,
                45.383728
              ],
              [
                -75.698972,
                45.383779
              ],
              [
                -75.69894,
                45.38383
              ],
              [
                -75.69894,
                45.383888
              ],
              [
                -75.69894,
                45.383928
              ],
              [
                -75.698924,
                45.384006
              ],
              [
                -75.698924,
                45.384061
              ],
              [
                -75.698902,
                45.384114
              ],
              [
                -75.698902,
                45.384192
              ],
              [
                -75.698902,
                45.384243
              ],
              [
                -75.698902,
                45.38429
              ],
              [
                -75.69889,
                45.384347
              ],
              [
                -75.698877,
                45.384401
              ],
              [
                -75.698874,
                45.384447
              ],
              [
                -75.698864,
                45.3845
              ],
              [
                -75.698864,
                45.384558
              ],
              [
                -75.698864,
                45.384596
              ],
              [
                -75.698849,
                45.384702
              ],
              [
                -75.698845,
                45.384798
              ],
              [
                -75.698826,
                45.384847
              ],
              [
                -75.698826,
                45.384949
              ],
              [
                -75.698801,
                45.385029
              ],
              [
                -75.698789,
                45.385097
              ],
              [
                -75.698751,
                45.385162
              ],
              [
                -75.698713,
                45.385215
              ],
              [
                -75.698694,
                45.385253
              ],
              [
                -75.698656,
                45.385299
              ],
              [
                -75.698599,
                45.385335
              ],
              [
                -75.698555,
                45.385375
              ],
              [
                -75.698485,
                45.38541
              ],
              [
                -75.698438,
                45.385435
              ],
              [
                -75.698397,
                45.385459
              ],
              [
                -75.698299,
                45.385486
              ],
              [
                -75.698248,
                45.385499
              ],
              [
                -75.698204,
                45.385517
              ],
              [
                -75.698144,
                45.385526
              ],
              [
                -75.698084,
                45.385528
              ],
              [
                -75.698014,
                45.38553
              ],
              [
                -75.697929,
                45.38553
              ],
              [
                -75.697853,
                45.385532
              ],
              [
                -75.69779,
                45.385532
              ],
              [
                -75.697717,
                45.385535
              ],
              [
                -75.697629,
                45.385537
              ],
              [
                -75.697563,
                45.385537
              ],
              [
                -75.69749,
                45.385535
              ],
              [
                -75.697398,
                45.385535
              ],
              [
                -75.697348,
                45.385535
              ],
              [
                -75.697266,
                45.385537
              ],
              [
                -75.697196,
                45.385537
              ],
              [
                -75.697133,
                45.385537
              ],
              [
                -75.697032,
                45.385537
              ],
              [
                -75.696978,
                45.385532
              ],
              [
                -75.696927,
                45.38553
              ],
              [
                -75.69683,
                45.385532
              ],
              [
                -75.696795,
                45.385532
              ],
              [
                -75.696741,
                45.385532
              ],
              [
                -75.696678,
                45.385535
              ],
              [
                -75.696561,
                45.385532
              ],
              [
                -75.696501,
                45.385532
              ],
              [
                -75.696479,
                45.38553
              ],
              [
                -75.696444,
                45.38553
              ],
              [
                -75.696406,
                45.38553
              ],
              [
                -75.696375,
                45.38553
              ],
              [
                -75.696375,
                45.385499
              ],
              [
                -75.696375,
                45.385401
              ],
              [
                -75.696378,
                45.385355
              ],
              [
                -75.696375,
                45.385304
              ],
              [
                -75.696375,
                45.385255
              ],
              [
                -75.696378,
                45.385191
              ],
              [
                -75.696378,
                45.385151
              ],
              [
                -75.696378,
                45.385097
              ],
              [
                -75.696375,
                45.385053
              ],
              [
                -75.696375,
                45.384998
              ],
              [
                -75.696384,
                45.384935
              ],
              [
                -75.696378,
                45.384904
              ],
              [
                -75.696375,
                45.384851
              ],
              [
                -75.696365,
                45.384805
              ],
              [
                -75.696359,
                45.384762
              ],
              [
                -75.696359,
                45.384718
              ],
              [
                -75.696381,
                45.384674
              ],
              [
                -75.696378,
                45.384638
              ],
              [
                -75.696378,
                45.384594
              ],
              [
                -75.696381,
                45.384552
              ],
              [
                -75.696375,
                45.384481
              ],
              [
                -75.696368,
                45.384454
              ],
              [
                -75.696362,
                45.384416
              ],
              [
                -75.696346,
                45.384361
              ],
              [
                -75.696343,
                45.384319
              ],
              [
                -75.696337,
                45.384267
              ],
              [
                -75.69633,
                45.384196
              ],
              [
                -75.69633,
                45.384179
              ],
              [
                -75.696333,
                45.384134
              ],
              [
                -75.696333,
                45.384088
              ],
              [
                -75.69633,
                45.384052
              ],
              [
                -75.696333,
                45.383992
              ],
              [
                -75.696321,
                45.383966
              ],
              [
                -75.69633,
                45.383921
              ],
              [
                -75.69633,
                45.383872
              ],
              [
                -75.696324,
                45.383839
              ],
              [
                -75.696314,
                45.383788
              ],
              [
                -75.696302,
                45.383746
              ],
              [
                -75.696286,
                45.383688
              ],
              [
                -75.696261,
                45.383624
              ],
              [
                -75.696235,
                45.383575
              ],
              [
                -75.696226,
                45.383508
              ],
              [
                -75.696217,
                45.383453
              ],
              [
                -75.696213,
                45.383409
              ],
              [
                -75.696194,
                45.383364
              ],
              [
                -75.696153,
                45.383295
              ],
              [
                -75.696147,
                45.383249
              ],
              [
                -75.696147,
                45.383213
              ],
              [
                -75.696128,
                45.383187
              ],
              [
                -75.69609,
                45.383113
              ],
              [
                -75.696065,
                45.383082
              ],
              [
                -75.696065,
                45.383051
              ],
              [
                -75.696033,
                45.383009
              ],
              [
                -75.695999,
                45.382945
              ],
              [
                -75.69598,
                45.382918
              ],
              [
                -75.695954,
                45.382878
              ],
              [
                -75.695938,
                45.38284
              ],
              [
                -75.695913,
                45.382792
              ],
              [
                -75.695897,
                45.382754
              ],
              [
                -75.695859,
                45.382703
              ],
              [
                -75.695834,
                45.382665
              ],
              [
                -75.695825,
                45.382625
              ],
              [
                -75.695803,
                45.382565
              ],
              [
                -75.695777,
                45.382528
              ],
              [
                -75.695762,
                45.382512
              ],
              [
                -75.695745,
                45.382483
              ]
            ]

reader = ReaderX()
socket = SocketX('http://localhost:3000')
car1 = CarSimulator("test-car 1", path, 1,False)
car2 = CarSimulator("test-car 2", path, 3, False)
car3 = CarSimulator("test-car 3", path, 1, True)
car4 = CarSimulator("test-car 4", path2, 5, True)
car5 = CarSimulator("test-car 5", path2, 1, False)

while(True):
    time.sleep(1)       
    socket.Emit("updated", reader.Test(car1))
    socket.Emit("updated", reader.Test(car2))
    socket.Emit("updated", reader.Test(car3))
    socket.Emit("updated", reader.Test(car4))
    socket.Emit("updated", reader.Test(car5))

   
